package {
    default_applicable_licenses: ["Android-Apache-2.0"],
}

android_app {
    name: "Traceur",
    platform_apis: true,
    certificate: "platform",
    optimize: {
        shrink_resources: true,
    },
    static_libs: [
        "androidx.appcompat_appcompat",
        "androidx.preference_preference",
        "androidx.recyclerview_recyclerview",
        "androidx.legacy_legacy-support-v4",
        "TraceurCommon",
        "Traceur-res",
    ],
    resource_dirs: [],
    srcs: ["src/**/*.java"],
    defaults: [
        "SettingsLibDefaults",
    ],
}

android_library {
    name: "TraceurCommon",
    static_libs: [
        "androidx.appcompat_appcompat",
        "androidx.legacy_legacy-support-v4",
        "perfetto_config_java_protos",
    ],
    manifest: "AndroidManifest-common.xml",
    resource_dirs: [],
    srcs: ["src_common/**/*.java"],
}

// Allow other build targets to access Traceur resources
android_library {
    name: "Traceur-res",
    use_resource_processor: true,
    static_libs: [
        "androidx.leanback_leanback",
        "androidx.leanback_leanback-preference",
        "androidx.legacy_legacy-preference-v14",
    ],
    manifest: "AndroidManifest-res.xml",
    resource_dirs: ["res"],
    srcs: [],
}
